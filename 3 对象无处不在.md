C++是混合型语言，因为要向后兼容C语言。

由于C++是C语言的超集，因此它也包含了C语言的一些不良特性，结果就是有时候C++会显得过于复杂。

## 3.1 通过引用操作对象

始终在创建引用时就进行初始化。

```java
String s = "abcd";
```

引用的作用是关联对象。通常我们使用`new`关键字来创建对象。`new`关键字表达的意思是"我要一个这种类型的对象"。

```java
String s = new String("abcd");
```

除了`String`以外，Java还提供了大量的预置类型可供选择。此外，你还可以创建新类型。

### 3.2.1 数据保存在哪里

1. **寄存器**（register）。这是速度最快的数据存储方式。
2. **栈**（stack）。数据存储在随机存取存储器（random-access memory，RAM）里。
3. **堆**（heap）。使用的也是RAM空间，用于存放所有Java对象。当你需要一个对象时，可以随时使用`new`来创建这个对象，那么当这段代码被执行时，Java会在堆上为该对象分配内存空间。
4. **常量存储**（constant storage）。常量通常会直接保存在程序代码中。在嵌入式系统里，这些常量可以保存在只读存储器（read-only memory，ROM）中。
5. **非RAM存储**（non-RAM storage）。如果一段数据没有保存在应用程序里，那么该数据的生命周期既不依赖于应用程序是否运行，也不受应用程序的管制。比如序列化对象和持久化对象。持久化对象指的是保存在磁盘上的对象，而这些对象即便在程序结束运行之后也依然能够保持其状态。这些数据存储类型的特点在于，它们会将对象转换成其他形式以保存于其他媒介中，然后在需要的时候重新转换回常规的RAM对象。

### 3.2.2 基本类型

Java为基本类型（primitive type）提供了对应的包装类（wrapper class）。

```java
char c = 'x';
Character ch = new Character(c);
// Character ch = new Character('x');
```

```java
Character ch = 'x'; // 自动装箱
char c = ch; // 自动拆箱
```

 **高精度数字**

Java提供了两个支持高精度计算的类，分别是`BigInteger`和`BitDecimal`。虽然这两个类也大致可以被归为包装类，但是它们其实并没有对应的基本类型。

### 3.2.3 Java中的数组

Java的数组一定会被初始化，并且无法访问数组边界之外的元素。

当你创建一个用于放置对象的数组时，实际上数组里包含的是引用，而这些引用会被自动初始化为一个特殊的值：`null`。

Java会认为一个值为`null`的引用没有指向任何对象，所以当你操作引用之前，需要确保将其指向了某个对象。

## 3.4 无须销毁对象

### 3.4.1 作用域

作用域会决定其范围内定义的变量名的可见性和生命周期。

### 3.4.2 对象的作用域

当你使用`new`创建一个对象时，该对象在其作用域结束后会依然存在。

```java
{
    String s = new String("a string");
} // 作用域结束
```

虽然引用`s`会在作用域结束后消失（该`String`对象在作用域结束后无法再获取），但是它指向的`String`对象还会继续占用内存。

垃圾收集器会监视所有通过`new`创建的对象，并及时发现哪些对象不再被引用，然后它会释放这些对象所占用的内存，使得这些内存可以用于其他新对象。

## 3.5 使用class关键字创建新类型

使用`class`关键字创建一个新的类：

```java
class ATypeName {
    // ...
}
```

通过`new`关键字创建一个该类的对象：

```java
ATypeName a = new ATypeName();
```

当定义一个类时，你可以为其定义两种元素：字段和方法。

```java
class DataOnly {
    int i;
    double d;
    boolean b;
}
```

每一个对象都会单独保存其字段。通常来说，不同对象的字段之间不会共享。

当一个类的字段是基本类型，即便你没有初始化这些字段，它们也会拥有默认值。

当变量作为类成员存在时，Java会将其初始化为默认值。最佳实践是你显式地初始化这些变量。

## 3.6 方法、参数以及返回值

方法包括几个部分：方法名、参数、返回值、以及方法体。

```java
ReturnType methodName(/* 参数列表 */) {
    // 方法体
}
```

Java中的方法只能作为类的一部分而存在，方法只能通过对象调用，而该对象必须能够执行该方法。如果你通过对象调用了一个不属于该对象的方法，会得到一个编译时错误。

在一个类的内部定义方法：

```java
int storage(String s) {
    return s.length() * 2;
}
```

你可以返回任意类型的值，也可以不返回任何值。

```java
boolean flag() { return true; }
double naturalLogBase() { return 2.718; }
void nothing() { return; }
void nothing2() {}
```

当返回值的类型是`void`时，使用`return`关键字的作用是退出该方法，因此在方法的末尾处就没有必要使用`return`了。此外，你可以在方法的任意位置使用`return`。然而，一旦返回值是非`void`类型，无论你在何处返回，编译器都会强制你必须提供正确类型的返回值。

## 3.7 编写Java程序

### 3.7.1 名称可见性

为了能够清晰地描述库的名称，Java语言的设计者所使用的方法是将你的互联网域名反转使用。因为域名是唯一的，所以一定不会冲突。

### 3.7.2 使用其他组件

当你在程序中使用预定义的类时，编译器必须找到这个类。

使用`import`关键字告知Java编译器你想要使用哪个类。

`import`语句的作用是通知编译器导入一个指定位置的包，即放置各种类的库。

你经常会用到编译器自带的各种Java标准库组件。

```java
import java.util.ArrayList;
```

这一行代码会告诉编译器，你要使用位于`util`库的`ArrayList`类。

使用通配符"*"导入`util`库的所有类。

```java
import java.util.*;
```

### 3.7.3 static关键字

创建一个类即描述了其对象的外观和行为。直到使用`new`关键字时，你才会真正创建一个对象，以及为该对象分配内存，并使得其方法可以被调用。

如果你使用了`static`关键字，则意味着使用`static`的字段或方法不依赖于任何对象。也就是说，即便你没有为一个类创建任何对象，依然可以调用该类的`static`方法或`static`字段。

对于非`static`的字段和方法来说，你必须创建一个对象才可以使用非`static`的字段或方法。

```java
class StaticTest {
    static int i = 47;
}
```

我们较为推荐通过类名调用`static`变量，因为这种方法突出了变量的`static`特质（这也有利于编译器进行代码优化）。

作为运行应用程序的入口，我们在定义`main()`方法时，`static`关键字是必不可少的一部分。

## 3.8 你的第一个Java程序

显示通过Java标准库的`Date`类所生成的日期。

```java
import java.util.*;

public class HelloDate {
  public static void main(String[] args) {
    System.out.println("Hello, it's: ");
    System.out.println(new Date());
  }
}
```

所有Java文件都会自动导入一个特定的库，即`java.lang`。

文件中必须存在一个与该文件同名的类（如果你没有这么做，则编译器会报错）。此外，如果你需要创建一个能够独立运行的程序，那么与文件同名的类中还必须包含一个程序启动的入口方法。

```java
public static void main(String[] args) { }
```

## 3.9 编程风格

类名首字母要大写。如果类名包含多个词，也要把这些词汇总到一起，每一个词的首字母也要大写。这种方式叫做"驼峰式命名法"（Camel-Case）。而其他内容，比如方法、字段（成员变量），以及对象名等，除了首字母要小写以外，使用的命名方式和类名一样。

